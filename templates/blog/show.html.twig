{% extends 'base.html.twig' %}

{% block body %}

    <div class="max-w-2xl px-8 py-4 mx-auto bg-white rounded-lg shadow-md dark:bg-gray-800">
        <div class="flex items-center justify-between">
            <span class="text-sm font-light text-gray-600 dark:text-gray-400">{{ article.createdAt | date('d/m/Y')}} à {{ article.createdAt | date('H:i') }}</span>
            <a class="px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-gray-600 rounded cursor-pointer hover:bg-gray-500">{{article.category.title}}</a>
        </div>

        <div class="mt-2">
            <h1 class="text-2xl font-bold text-gray-700 dark:text-white hover:text-gray-600 dark:hover:text-gray-200 hover:underline">{{ article.title }}</h1>
            <p class="mt-2 text-gray-600 dark:text-gray-300">{{ article.content }}</p>
        </div>

        <div class="flex items-center justify-between mt-4">
            <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline">Read more</a>

            <div class="flex items-center">
                <img class="hidden object-cover w-10 h-10 mx-4 rounded-full sm:block" src="https://images.unsplash.com/photo-1502980426475-b83966705988?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=40&q=80" alt="avatar">
                <a class="font-bold text-gray-700 cursor-pointer dark:text-gray-200">Didor Ada</a>
            </div>
        </div>
    </div>

    <section id="commentaires">
        <h1>{{ article.comments | length }}Commentaires :</h1>
        {% for comment in article.comments %}
            <div class="comment">
                <div class="row">
                    <div class="col-3">
                        {{ comment.author }} <small>{{ comment.createdAt | date('d/m/Y à H:i') }}</small>
                    </div>
                    <div class="col">
                        {{ comment.content | raw }}
                    </div>
                </div>
            </div>
        {% endfor %}

        {% if app.user %}

        {{ form_start(commentForm) }}
        {{ form_row(commentForm.author,
            {'attr': {'placeholder': "Votre nom" }}) }}
        {{ form_row(commentForm.content,
            {'attr': {'placeholder': "Votre commentaire" }}) }}

        <button type="submit" class="px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-blue-600 rounded-md dark:bg-gray-800 hover:bg-blue-500 dark:hover:bg-gray-700 focus:outline-none focus:bg-blue-500 dark:focus:bg-gray-700">
                Ajouter un commentaire
        </button>
        {{ form_end(commentForm) }}

        {% else %}
            <h2>Il faut être connecté pour pouvoir écrire un commentaire</h2>
            <a href="{{ path('security_login') }}">Connexion</a>
        {% endif %}
    </section>

{% endblock %}
